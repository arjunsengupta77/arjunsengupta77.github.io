import os
from pypdf import PdfReader

def extract_text_with_pypdf(folder_path):
    pdf_texts = {}

    for filename in os.listdir(folder_path):
        if filename.lower().endswith('.pdf'):
            file_path = os.path.join(folder_path, filename)
            key = os.path.splitext(filename)[0]

            try:
                reader = PdfReader(file_path)
                full_text = ''
                for page in reader.pages:
                    full_text += page.extract_text() or ''
                pdf_texts[key] = full_text.strip()
            except Exception as e:
                print(f"Error reading {filename}: {e}")

    return pdf_texts

# Example usage
folder = '/path/to/your/folder'
pdf_dict = extract_text_with_pypdf(folder)

# Optional: print filenames and text lengths
for name, text in pdf_dict.items():
    print(f"{name}: {len(text)} characters")